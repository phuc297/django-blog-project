{% extends 'base/base.html' %}
{% load static content_filters %}

{% block title %}
  Django Blog
{% endblock %}

{% block content %}
  <div class="w-2/5 mx-auto">
    {% for post in posts %}
      <article class="flex flex-1 bg-white rounded-lg border border-gray-300 p-8 my-6">
        <div class="flex flex-col justify-between mx-4 flex-1">
          <a href="{% url 'blog:detail' post.id %}">
            <h4 class="text-gray-600 font-semibold"><time datetime="{{ post.created_at|date:'c' }}"><span>{{ post.created_at|date:'F j, Y' }}</span></time></h4>
            <h3 class="text-2xl font-semibold text-gray-800 hover:text-green-500">{{ post.title }}</h3>
          </a>
          <p class="text-gray-600">{{ post.description }}...</p>

          <div class="flex justify-between items-center mt-2">
            <a href="{% url 'users:profile' post.author.profile.id %}" class="flex items-center">
              <img src="{{ post.author.profile.avatar.url }}" alt="Avatar" class="h-12 w-12 rounded-full" />
              <span class="font-medium hover:underline">{{ post.author }}</span>
            </a>
          </div>

          <div class="font-semibold text-sm text-gray-600 m-2 flex items-start gap-x-6">
            <a href="" class="p-1">
              <span class="flex items-center space-x-1">
                <svg aria-hidden="true" class="svg-icon iconMessage va-middle mr4 mtn2" width="18" height="18" viewBox="0 0 18 18">
                  <path d="M1 4v14l3-3h11c1.09 0 2-.91 2-2V4c0-1.09-.91-2-2-2H3a2 2 0 0 0-2 2m3 9-1 1V4h12v9zm1-6a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2H6a1 1 0 0 1-1-1m1 2a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2z"></path>
                </svg>

                <span>{{ post.comments.all.count }}</span>
                <span>comment</span>
              </span>
            </a>
            <div class="w-2/3 flex flex-wrap gap-1">
              {% for tag in post.tags.all %}
                <a href="" class="border border-green-300 text-green-400 hover:bg-green-100 rounded p-1"><span>{{ tag }}</span></a>
              {% endfor %}
            </div>
          </div>
        </div>
        <a href="{% url 'blog:detail' post.id %}" class="mx-2"><img src="{{ post.thumbnail.url }}" alt="Thumbnail" class="hidden lg:block w-64 h-36 object-cover rounded-lg" /></a>
      </article>
    {% endfor %}
  </div>
{% endblock %}
